# 【Django 5】家庭内戦争を終結させるため、家事分担を「ゲーム化」してポイント制にしてみた話

## 1. はじめに：なぜ作ったのか

**「また洗剤の補充忘れてるじゃん！」**
**「ゴミ捨てたけど新しい袋セットしてないよ！」**

...聞こえますか？ これは日本のどこかの家庭で毎日のように繰り広げられている**聖戦（家事分担揉め）**の音です。

僕もその戦士の一人でした。「やったつもり」と「やってない認定」の狭間で揺れる魂。
そこでエンジニアとして一つの解を導き出しました。

**「そうだ、家事をゲームにしよう。ポイント制にして競えば、むしろ『ゴミ捨てさせてくれ！』ってなるんじゃね？」**

というわけで、**Django 5** で爆速で作りました。名付けて **「HouseGem (Housework Gamification)」** です。

## 2. 完成したもの

![Dashboard Screenshot](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/...)
*(※脳内補完してください。めっちゃポップなUIです)*

### 主な機能
1.  **家グループ招待システム**: 8桁の怪しげなコードを入力すると、同じ家に所属できます。
2.  **家事タスク管理**: 「皿洗い (10pt)」「風呂掃除 (20pt)」「G駆除 (500pt)」みたいに登録。
3.  **「やった！」ボタン**: 押すと紙吹雪が舞います🎉。これが見たいがために家事をするようになります（パブロフの犬）。
4.  **週次ランキング**: 1週間で誰が一番貢献したか競います。「今週の負けが夕飯おごりな」みたいな使い方が可能。
5.  **分析ダッシュボード**: 「最近お前サボってね？」をデータで殴るためのグラフ機能。

## 3.技術スタック

「とりあえず動くものを最速で」がモットーなので、構成はシンプルです。

-   **Framework**: Django 5.2 (最新！ピカピカ！)
-   **DB**: SQLite3 (家庭内LANで使うだけだし、バックアップもファイルコピーで済むし最高)
-   **Frontend**: Vanilla HTML/CSS (脱React/Vue。原点回帰。`rem` と `flex` があれば生きていける)
-   **Libs**:
    -   `Chart.js`: グラフ描画用。
    -   `canvas-confetti`: **最重要機能**。紙吹雪を散らすためだけのライブラリ。

## 4. こだわりポイント（実装の裏側）

### ポイント付与の快感設計

「家事をした」という事実は地味です。褒められないと続きません。
そこで、完了ボタンを押した瞬間にJavaScriptで紙吹雪を舞わせることにしました。

```javascript
// templates/base.html
if (msg.textContent.includes('ポイント獲得')) {
    confetti({
        particleCount: 150, // 景気よく150発
        spread: 70,
        origin: { y: 0.6 }
    });
}
```

たったこれだけで、ゴミ捨てが**エレクトリカルパレード**になります。嘘です。でも嬉しいです。

### 分析機能で「見える化」

`Chart.js` を使って、「誰が」「どの家事を」「どれくらい」やったかを可視化しました。
データの集計はDjangoのORMが火を吹きます。

```python
# gamification/views.py
user_stats = ChoreExecution.objects.filter(
    chore__group=group,
    completed_at__gte=last_30_days,
    status='APPROVED'
).values('performer__nickname').annotate(
    total_points=Sum('points_earned') # 合計ポイントを一撃で計算
).order_by('-total_points')
```
これで「俺ばかりやっている気がする」という感覚値だけの議論に終止符が打たれます。**数字は嘘をつかない。**

## 5. 導入方法（家庭内オンプレミス）

我が家ではMac miniを常時起動サーバーにして、`runserver 0.0.0.0:8000` で家庭内LANに公開しています。
家族のスマホからは `http://192.168.x.x:8000` にアクセスしてホーム画面に追加。これでPWAっぽく使えます。

## 6. まとめ

作ってから1週間。
「ポイント稼ぎたいから洗濯物畳むわ！」という謎のポジティブな会話が生まれました。
**ゲーミフィケーション、恐るべし。**

みなさんも家庭の平和を守るために、Djangoでアプリを作ってみてはいかがでしょうか？
ソースコードは（公開してないけど）構成は超シンプルなんで、週末開発におすすめです！

**Let's Hack the Housework!** 🧹✨
